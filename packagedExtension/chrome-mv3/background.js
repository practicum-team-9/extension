var background=(function(){"use strict";function c(e){return e==null||typeof e=="function"?{main:e}:e}const s=globalThis.browser?.runtime?.id?globalThis.browser:globalThis.chrome,a=c({main(){console.log("Hello background!",{id:s.runtime.id}),chrome.runtime.onInstalled.addListener(()=>{console.log("Chrome runtime ON INSTALLED"),chrome.contextMenus.create({id:"newForm",title:"Making the new form accessible",contexts:["all"]}),chrome.contextMenus.onClicked.addListener(async(e,n)=>{e.menuItemId==="newForm"&&(console.log(n?.id),chrome.tabs.sendMessage(n?.id,{action:"newForm"},function(o){console.info("Response is:",o)}))}),s.runtime.onMessage.addListener(async(e,n,o)=>{if(e.type==="GREETING"&&(console.log("Received greeting:",e.payload),o("Acknowledged greeting!"),n.tab?.id)){console.log("Sending message");const r=await chrome.tabs.sendMessage(n.tab.id,{type:"SAYIT!",payload:e.payload});console.log("Received response from content script:",r)}return!0}),s.runtime.onMessage.addListener(async(e,n,o)=>(e.type==="settingsDataChanged"&&(console.log("Received settingsDataChanged"),e.payload&&chrome.tabs.query({active:!0,currentWindow:!0},function(r){r[0].id&&chrome.tabs.sendMessage(r[0].id,{type:"setSettingsData",payload:e.payload})}),o("Acknowledged settingsDataChanged!")),!0))})}});function u(){}function t(e,...n){}const d={debug:(...e)=>t(console.debug,...e),log:(...e)=>t(console.log,...e),warn:(...e)=>t(console.warn,...e),error:(...e)=>t(console.error,...e)};let i;try{i=a.main(),i instanceof Promise&&console.warn("The background's main() function return a promise, but it must be synchronous")}catch(e){throw d.error("The background crashed on startup!"),e}return i})();
